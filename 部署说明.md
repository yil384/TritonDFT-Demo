# 🚀 GitHub + tritondft.com 部署说明

## 📋 概述

将您的 TritonDFT 网站部署到 GitHub Pages 并绑定到 tritondft.com 域名。

---

## ⚡ 快速开始（5步）

### 1️⃣ 创建 GitHub 仓库

访问：https://github.com/new

填写信息：
- **Repository name**: `TritonDFT-Demo` 或其他名称
- **Public** ✅（必须是 Public 才能使用 GitHub Pages）
- **不要**勾选 "Initialize with README"

点击 **Create repository**

---

### 2️⃣ 初始化并推送代码

打开终端，运行：

```bash
cd /Users/yil384/UCSD/TritonDFT-Demo-Web

# 初始化 Git
git init

# 添加所有文件
git add .

# 第一次提交
git commit -m "Initial commit: TritonDFT website"

# 连接到 GitHub（替换成你的信息）
git remote add origin https://github.com/YOUR_USERNAME/YOUR_REPO.git

# 推送到 GitHub
git branch -M main
git push -u origin main
```

**注意**：
- 替换 `YOUR_USERNAME` 为你的 GitHub 用户名
- 替换 `YOUR_REPO` 为你创建的仓库名

---

### 3️⃣ 启用 GitHub Pages

1. 进入你的 GitHub 仓库页面
2. 点击 **Settings**（设置）
3. 左侧菜单找到 **Pages**
4. 在 "Source" 下：
   - Branch: 选择 `main`
   - Folder: 选择 `/ (root)`
5. 点击 **Save**

✅ 等待 2-3 分钟，你会看到一个绿色提示，显示网站已发布。

**测试地址**：
```
https://YOUR_USERNAME.github.io/YOUR_REPO/
```

在浏览器访问这个地址，确认网站能正常显示。

---

### 4️⃣ 配置自定义域名

#### GitHub 端设置

1. 仍在 **Settings** → **Pages** 页面
2. 找到 **Custom domain** 部分
3. 输入：`tritondft.com`
4. 点击 **Save**
5. ✅ 勾选 **"Enforce HTTPS"**（强制 HTTPS）

#### Squarespace DNS 设置

1. 登录 Squarespace：https://account.squarespace.com/
2. 找到并点击域名：**tritondft.com**
3. 进入 **DNS Settings** 或 **Advanced DNS**
4. 添加以下 4 条 **A 记录**：

| 类型 | 主机 | 值 | TTL |
|------|------|---|-----|
| A | @ | 185.199.108.153 | 3600 |
| A | @ | 185.199.109.153 | 3600 |
| A | @ | 185.199.110.153 | 3600 |
| A | @ | 185.199.111.153 | 3600 |

**重要**：
- 如果已有与 @ 主机冲突的记录，需要先删除或禁用
- 保存更改后，DNS 需要时间传播

⏱️ **DNS 传播时间**：通常 15 分钟到 48 小时

---

### 5️⃣ 验证部署

#### 检查 DNS（15分钟后）

打开终端，运行：
```bash
dig tritondft.com
```

应该能看到返回的 IP 地址是 185.199.108.153 等。

#### 访问网站

在浏览器访问：
- ✅ https://tritondft.com
- ✅ 检查是否有绿色锁图标（HTTPS）

---

## 🔄 日常更新流程

### 方法 1：使用部署脚本（推荐）

```bash
cd /Users/yil384/UCSD/TritonDFT-Demo-Web
./deploy.sh
```

脚本会：
1. 检查 Git 状态
2. 添加所有更改
3. 提示输入提交信息
4. 自动推送到 GitHub

### 方法 2：手动命令

```bash
cd /Users/yil384/UCSD/TritonDFT-Demo-Web

# 添加更改
git add .

# 提交
git commit -m "描述你的更改"

# 推送
git push
```

⏱️ 推送后 1-2 分钟，网站会自动更新。

---

## 📝 常用命令

```bash
# 查看当前状态
git status

# 查看提交历史
git log --oneline

# 查看远程仓库
git remote -v

# 拉取最新更改
git pull

# 查看文件差异
git diff

# 放弃本地更改
git checkout -- filename

# 回退到上一个版本
git reset --hard HEAD~1
```

---

## 🆘 常见问题

### 问题 1：推送时要求输入用户名密码

**原因**：GitHub 不再支持密码认证

**解决方法**：使用 Personal Access Token

1. 访问：https://github.com/settings/tokens
2. 点击 "Generate new token (classic)"
3. 勾选 "repo" 权限
4. 生成 token 并保存（只显示一次！）
5. 推送时用 token 代替密码

或使用 SSH：
```bash
# 生成 SSH 密钥
ssh-keygen -t ed25519 -C "your_email@example.com"

# 添加到 GitHub
# 复制公钥内容并添加到 GitHub Settings → SSH Keys
cat ~/.ssh/id_ed25519.pub

# 更改远程仓库 URL
git remote set-url origin git@github.com:YOUR_USERNAME/YOUR_REPO.git
```

### 问题 2：网站显示 404

**检查清单**：
1. ✅ 确认 `index.html` 在根目录
2. ✅ GitHub Pages 已启用
3. ✅ 等待 2-3 分钟
4. ✅ 清除浏览器缓存

```bash
# 检查文件
ls -la index.html

# 重新推送
git add .
git commit -m "Fix 404"
git push
```

### 问题 3：自定义域名不工作

**检查清单**：
1. ✅ CNAME 文件存在：`cat CNAME`（应显示 tritondft.com）
2. ✅ DNS 记录已正确添加
3. ✅ 等待 DNS 传播（最多 48 小时）
4. ✅ 清除浏览器缓存（Cmd+Shift+R）

**验证 DNS**：
```bash
# Mac/Linux
dig tritondft.com

# 或使用在线工具
# https://dnschecker.org/
```

### 问题 4：HTTPS 无法启用

**原因**：DNS 还未完全传播

**解决方法**：
1. 等待 DNS 完全传播（可能需要几小时）
2. 在 GitHub Pages 设置中：
   - 取消勾选 "Enforce HTTPS"
   - 等待几小时
   - 重新勾选

### 问题 5：CSS/JS 文件不加载

**原因**：文件路径问题

**检查** `index.html` 中的路径：
```html
<!-- ✅ 正确 -->
<link rel="stylesheet" href="styles.css">
<script src="script.js"></script>

<!-- ❌ 错误 -->
<link rel="stylesheet" href="/styles.css">
```

---

## 📊 部署检查清单

部署前确认：

- [ ] Git 已初始化
- [ ] 代码已推送到 GitHub
- [ ] GitHub Pages 已启用
- [ ] 自定义域名已配置
- [ ] CNAME 文件已创建
- [ ] Squarespace DNS 已设置
- [ ] DNS 已传播
- [ ] HTTPS 已启用
- [ ] 网站可正常访问
- [ ] 所有链接正常
- [ ] 图片正常加载
- [ ] 移动端显示正常

---

## 🎯 Squarespace DNS 详细步骤

### 登录 Squarespace

1. 访问：https://account.squarespace.com/
2. 输入账号密码登录

### 找到域名设置

1. 在控制面板中找到 **Domains**（域名）
2. 点击 **tritondft.com**
3. 选择 **DNS Settings** 或 **Advanced DNS**

### 添加 A 记录

1. 点击 **Add Record** 或 **添加记录**
2. 选择类型：**A**
3. 填写信息：
   - Host: `@`
   - Points to: `185.199.108.153`
   - TTL: `3600`（或保持默认）
4. 点击 **Save**
5. 重复 3 次，添加其他 3 个 IP

### 删除冲突记录

如果已有指向 @ 的记录：
1. 找到冲突的记录
2. 点击删除或禁用
3. 保存更改

---

## 🔍 验证工具

### DNS 检查
- **在线工具**：https://dnschecker.org/
- **命令行**：`dig tritondft.com`
- **Windows**：`nslookup tritondft.com`

### 网站测试
- **SSL 检查**：https://www.ssllabs.com/ssltest/
- **速度测试**：https://gtmetrix.com/
- **移动端测试**：https://search.google.com/test/mobile-friendly

---

## 📈 性能优化建议

### 1. 压缩图片
- 使用 TinyPNG：https://tinypng.com/
- 或 Squoosh：https://squoosh.app/
- 目标：每张图片 < 200KB

### 2. 启用缓存
GitHub Pages 自动处理，无需额外配置。

### 3. 监控性能
添加 Google Analytics 追踪访问数据。

---

## 📞 获取帮助

- **详细指南**：查看 `GITHUB_DEPLOYMENT.md`
- **快速参考**：查看 `QUICK_DEPLOY.md`
- **GitHub 文档**：https://docs.github.com/pages
- **Squarespace 帮助**：https://support.squarespace.com/

---

## ✅ 完成后

您的网站将在以下地址可访问：

- **主域名**：https://tritondft.com
- **GitHub**：https://YOUR_USERNAME.github.io/YOUR_REPO/

🎉 **恭喜！您的网站已成功部署！**

---

**预计时间**：
- 配置：20-30 分钟
- DNS 传播：15 分钟 - 48 小时
- 总计：最多 2 天

